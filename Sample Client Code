import socket
import threading

# Configure server connection
SERVER_HOST = '127.0.0.1'
SERVER_PORT = 12345

# Connect to server
client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client.connect((SERVER_HOST, SERVER_PORT))

# Function to send commands
def send_command(command):
    client.sendall(command.encode())
    response = client.recv(1024).decode()
    print("Server:", response)

# Listening thread for server responses
def receive_messages():
    while True:
        try:
            message = client.recv(1024).decode()
            if message:
                print("Server:", message)
        except:
            print("[ERROR] Connection closed.")
            break

# Start receiving thread
thread = threading.Thread(target=receive_messages)
thread.start()

# Send commands to server
print("Enter commands:")
while True:
    cmd = input("> ")
    send_command(cmd)
    if cmd == "/leave":
        break

client.close()
